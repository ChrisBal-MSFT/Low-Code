"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3262],{4137:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>k});var r=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var p=r.createContext({}),c=function(e){var t=r.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),s=c(o),u=n,k=s["".concat(p,".").concat(u)]||s[u]||m[u]||a;return o?r.createElement(k,i(i({ref:t},d),{},{components:o})):r.createElement(k,i({ref:t},d))}));function k(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[s]="string"==typeof e?e:n,i[1]=l;for(var c=2;c<a;c++)i[c]=o[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}u.displayName="MDXCreateElement"},4237:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>s,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var r=o(7462),n=(o(7294),o(4137));const a={sidebar_position:1,title:"2. Add Custom Code"},i=void 0,l={unversionedId:"prodev-4/step-2",id:"prodev-4/step-2",title:"2. Add Custom Code",description:"Working as part of the PrioritZ fusion team you will be configuring a custom connector for an existing API.  The team would like to add badging to the PrioritZ application to give credit to users when they have completed ranking an item.  The team identified an existing API, but it doesn't have a Power Platform connector.",source:"@site/docs/prodev-4/step-2.md",sourceDirName:"prodev-4",slug:"/prodev-4/step-2",permalink:"/Low-Code/docs/prodev-4/step-2",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"2. Add Custom Code"},sidebar:"tutorialSidebar",previous:{title:"1. Build Custom Connector",permalink:"/Low-Code/docs/prodev-4/step-1"},next:{title:"3. Use Custom Connector",permalink:"/Low-Code/docs/prodev-4/step-3"}},p={},c=[{value:"2.1 Add code from resource folder",id:"21-add-code-from-resource-folder",level:2},{value:"2.2 Test custom code",id:"22-test-custom-code",level:2}],d={toc:c};function s(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("admonition",{title:"LAB SCENARIO",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Working as part of the PrioritZ fusion team you will be configuring a custom connector for an existing API.  The team would like to add badging to the PrioritZ application to give credit to users when they have completed ranking an item.  The team identified an existing API, but it doesn't have a Power Platform connector.  "),(0,n.kt)("p",{parentName:"admonition"},"When you review the API, you see that it has four operations and uses API key authentication."),(0,n.kt)("p",{parentName:"admonition"},"In ",(0,n.kt)("strong",{parentName:"p"},"Exercise 2")," you will add a new operation to only return the current badge name and image URL.  You will do this by using the custom code feature to reshape the response from the API.\n\ud83e\udd16 Note: If you already have the custom connector open, skip to step 4")),(0,n.kt)("h2",{id:"21-add-code-from-resource-folder"},"2.1 Add code from resource folder"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Navigate to ",(0,n.kt)("a",{parentName:"p",href:"https://aka.ms/lowcode-february/workshop/powerautomate"},(0,n.kt)("strong",{parentName:"a"},"Power Automate"))," ")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Expand Data and select Custom connectors.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click the Edit button of the custom connector you created.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the Definition tab and click New action.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Enter Get current badge for Summary, Get current badge for Description, and getcurrentbadge for Operation ID.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Scroll down to the Request section and click + Import from sample.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select Get for Verb, enter ",(0,n.kt)("inlineCode",{parentName:"p"},"https://contosobadgestest.azurewebsites.net/getcurrentbadge?id={id}")," for URL, and click Import.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click Update connector and wait for the connector to be updated.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the Code tab.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Enable Code and click Upload.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the ",(0,n.kt)("inlineCode",{parentName:"p"},"CustomConnectorCode.csx")," file located in the lab resources folder and click Open.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the ",(0,n.kt)("strong",{parentName:"p"},"getcurrentbadge")," action.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Review the code you just added.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click Update connector and wait for the connector to be updated.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Advance to Test.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the getcurrentbadge action.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Provide your email address as id and click Test operation.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The test should succeed, and you should get current badge for the user you created.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Copy the Response Body JSON.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the Definition tab.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the ",(0,n.kt)("strong",{parentName:"p"},"getcurrentbadge")," action.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Scroll down to the Response section and click + Add default response.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Paste the JSON you copied in the Body and click Import.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click Update connector and wait for the connector to be updated.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Do not navigate away from this page."))),(0,n.kt)("h2",{id:"22-test-custom-code"},"2.2 Test custom code"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Select the Test tab."),(0,n.kt)("li",{parentName:"ol"},"Select the connection you created earlier."),(0,n.kt)("li",{parentName:"ol"},"Go to the Operations section and select the ",(0,n.kt)("strong",{parentName:"li"},"getcurrentbadge")," operation."),(0,n.kt)("li",{parentName:"ol"},"Provide your email as id and click Test operation."),(0,n.kt)("li",{parentName:"ol"},"The operation should succeed, and the response Body should look like the image below.")))}s.isMDXComponent=!0}}]);