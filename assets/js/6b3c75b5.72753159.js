"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9397],{4137:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>u});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),c=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},m="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=c(a),d=o,u=m["".concat(p,".").concat(d)]||m[d]||k[d]||r;return a?n.createElement(u,i(i({ref:t},s),{},{components:a})):n.createElement(u,i({ref:t},s))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[m]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5500:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=a(7462),o=(a(7294),a(4137));const r={sidebar_position:1,title:"3. Use Custom Connector"},i=void 0,l={unversionedId:"prodev-4/step-3",id:"prodev-4/step-3",title:"3. Use Custom Connector",description:"Working as part of the PrioritZ fusion team you will be configuring a custom connector for an existing API.  The team would like to add badging to the PrioritZ application to give credit to users when they have completed ranking an item.  The team identified an existing API, but it doesn't have a Power Platform connector.",source:"@site/docs/prodev-4/step-3.md",sourceDirName:"prodev-4",slug:"/prodev-4/step-3",permalink:"/Low-Code/docs/prodev-4/step-3",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"3. Use Custom Connector"},sidebar:"tutorialSidebar",previous:{title:"2. Add Custom Code",permalink:"/Low-Code/docs/prodev-4/step-2"},next:{title:"1. Build Azure Function",permalink:"/Low-Code/docs/prodev-5/step-1"}},p={},c=[{value:"3.1 Test connector from canvas app",id:"31-test-connector-from-canvas-app",level:2},{value:"3.2 Test connector from flow (optional)",id:"32-test-connector-from-flow-optional",level:2}],s={toc:c};function m(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"LAB SCENARIO",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Working as part of the PrioritZ fusion team you will be configuring a custom connector for an existing API.  The team would like to add badging to the PrioritZ application to give credit to users when they have completed ranking an item.  The team identified an existing API, but it doesn't have a Power Platform connector.  "),(0,o.kt)("p",{parentName:"admonition"},"When you review the API, you see that it has four operations and uses API key authentication."),(0,o.kt)("p",{parentName:"admonition"},"In ",(0,o.kt)("strong",{parentName:"p"},"Exercise 3")," you will test the custom connector you created using a flow and a canvas application.")),(0,o.kt)("h2",{id:"31-test-connector-from-canvas-app"},"3.1 Test connector from canvas app"),(0,o.kt)("p",null,"\ud83e\udd16 Note: In this task, you will use the custom connector you created to show the user\u2019s current badge on the PrioritZ Ask canvas application."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Navigate to ",(0,o.kt)("a",{parentName:"p",href:"https://aka.ms/lowcode-february/makerportal"},(0,o.kt)("strong",{parentName:"a"},"Power Apps maker portal"))," and make sure you are in your dev environment. ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Expand Solutions and open the PrioritZ solution.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select Apps, select the PrioritZ Ask application, and click Edit.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select Data from the left and click + Add data.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Expand Connectors and select the Badges connector you created.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click + Add a connection.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Open a new browser tab or window and navigate to ",(0,o.kt)("a",{parentName:"p",href:"https://aka.ms/lowcode-february/workshop/contoso"},(0,o.kt)("strong",{parentName:"a"},"Contoso Coffee Badges"))," ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on open the API Key link")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Copy the API Key. Keep this API Key in a notepad, you will need it again.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go back to the app designer, paste the API Key you copied, and click Connect.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select the Tree view.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select the Components tab, click + Insert tab, search for image and select Image.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Change the Image name to User badge.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Set the User badge Image value to the formula below."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"ContosoBadges.getcurrentbadge({id:User().Email}).image\n")),(0,o.kt)("ol",{start:15},(0,o.kt)("li",{parentName:"ol"},"Set the Tooltip value of the User badge to the formula below.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"ContosoBadges.getcurrentbadge({id:User().Email}).name\n")),(0,o.kt)("ol",{start:16},(0,o.kt)("li",{parentName:"ol"},"Make the image smaller and move it to top right corner of the screen."),(0,o.kt)("li",{parentName:"ol"},"The User badge should now look like the image below. "),(0,o.kt)("li",{parentName:"ol"},"Select Screens tab in the Tree view. Click Play button."),(0,o.kt)("li",{parentName:"ol"},"Hover over the badge to see the badge name.")),(0,o.kt)("ol",{start:20},(0,o.kt)("li",{parentName:"ol"},"Close the preview."),(0,o.kt)("li",{parentName:"ol"},"Click Publish."),(0,o.kt)("li",{parentName:"ol"},"Select Publish this version."),(0,o.kt)("li",{parentName:"ol"},"Go back to the solution by clicking on the Back button."),(0,o.kt)("li",{parentName:"ol"},"Do not navigate away from this page.")),(0,o.kt)("h2",{id:"32-test-connector-from-flow-optional"},"3.2 Test connector from flow (optional)"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Make sure you are still in the PrioritZ solution.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click + New and select Automation | Cloud flow | Instant.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter Test add credit for flow name, select Manually trigger a flow, and click Create.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click + New step.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select the Custom tab and then select the Add credit action.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter Test connection, paste the API Key you copied earlier, and click Create.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the recipientId field, go to the Dynamic content pane, and select User email.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the name field, go to the Dynamic content pane, and select User name.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter 1 for points and click Save. Wait for the flow to be saved.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click Test.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select Manually and click Test again.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click Continue.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click Run flow.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click Done.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The flow run should succeed.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the back button.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select Cloud flows and open the flow you created."))),(0,o.kt)("ol",{start:18},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Start a new browser window and navigate to ",(0,o.kt)("a",{parentName:"p",href:"https://aka.ms/lowcode-february/makerportal"},(0,o.kt)("strong",{parentName:"a"},"Power Apps maker portal")),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Make sure you are the correct environment.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select Apps and launch the PrioritZ Ask application.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The application should now show First Badge.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go back to flow and run it couple more times.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go back to the PrioritZ Ask application and refresh the page.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should now see the Team Player badge.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go to the flow and run it two more times.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go back to the PrioritZ Ask application and refresh the page.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should now see the Champ badge"))))}m.isMDXComponent=!0}}]);